<!DOCTYPE= html>

<head>
	<title>Welcome to Rock, Paper, or Scissors!</title>
</head>

<body>
	<h1>Time to Play a Game of Rock, Paper, or Scissors!</h1>
<div>
	<button value='rock'>Rock</button>
	<button value='paper'>Paper</button>
	<button value='scissors'>Scissors</button>
</div>
<div class='results'> </div>
<div class='score'>

</div>

<script type="text/javascript">
let playerScore=0;
let computerScore=0;

function computerPlay(){
	let number=Math.random();
	if (number<=1/3){
		return "rock";
	} else if (number <=2/3){
		return "paper";
	} else {
		return "scissors";
	}

}

function play(e){
	const results = document.createElement('p');
	const container = document.querySelector('.results')
	if (container.hasChildNodes()){
		container.removeChild(container.firstChild);
	}
	container.appendChild(results);
	playerChoice=this.value;
	let computerChoice=computerPlay();
	results.innerHTML="";

	switch(playerChoice){
		case "rock":
			if (computerChoice=="rock") {
				results.innerHTML="Again! Rock ties rock!";
				game();
				break;
			} else if (computerChoice=="paper"){
				computerScore++;
				results.innerHTML="You lose this round! Paper beats rock!";
				game();
				break;
			} else {
				playerScore++;
				results.innerHTML="You win this round! Rock beats scissors!";
				game();
				break;
			}
		case "paper":
			if (computerChoice=="rock") {
				playerScore++;
				results.innerHTML="You win this round! Paper beats rock!";
				game();
				break;

			} else if (computerChoice=="paper"){
				results.innerHTML="Again! Paper ties paper!";
				game();
				break;

			} else {
				computerScore++;
				results.innerHTML="You lose this round! Scissors beats paper!";
				game();
				break;

			}
		case "scissors":
			if (computerChoice=="rock") {
				computerScore++;
				results.innerHTML="You lose this round! Rock beats scissors!";
				game();
				break;

			} else if (computerChoice=="paper"){
				playerScore++;
				results.innerHTML="You win this round! Scissors beats paper!";
				game();
				break;

			} else {
				results.innerHTML="Again! Scissors ties scissors!";
				game();
				break;

			}

	}

}

function game(){

	const score = document.createElement('p');
	const container2 = document.querySelector('.score')
		if (container2.hasChildNodes()){
		container2.removeChild(container2.firstChild);
	}
	container2.appendChild(score);
	score.innerHTML="";
	score.innerHTML="The current score is: " +playerScore + " for the player and " + computerScore + " for the computer.";


	if (playerScore==5) {
		score.innerHTML="You wrecked the computer! Final Score: " +
		playerScore + " to " + computerScore;
		choiceButtons.foreach(removeEventListener('click',play))
	}

	if (computerScore==5) {
		score.innerHTML="The computer wins! Final Score: " +
		computerScore + " to " + playerScore;
		choiceButtons.foreach(removeEventListener('click',play))
	}
}

const choiceButtons= Array.from(document.querySelectorAll('button'));

choiceButtons.forEach(button =>button.addEventListener('click',play))
</script>

</body>